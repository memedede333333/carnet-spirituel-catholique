{"success":true,"content":"'use client'\nimport { useEffect, useState } from 'react'\nimport { supabase } from '@/app/lib/supabase'\nimport { useRouter } from 'next/navigation'\nimport Link from 'next/link'\nimport { format } from 'date-fns'\nimport { fr } from 'date-fns/locale'\nimport { HandHeart, Plus, Calendar, User, MessageCircle } from 'lucide-react'\n\ninterface Priere {\n  id: string\n  type: 'guerison' | 'freres' | 'intercession'\n  personne_prenom: string\n  personne_nom?: string\n  date: string\n  sujet: string\n  nombre_fois: number\n  notes?: string\n  created_at: string\n}\n\nexport default function PrieresPage() {\n  const router = useRouter()\n  const [prieres, setPrieres] = useState<Priere[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    loadPrieres()\n  }, [])\n\n  const loadPrieres = async () => {\n    const { data: { user } } = await supabase.auth.getUser()\n    \n    if (!user) {\n      router.push('/login')\n      return\n    }\n\n    const { data, error } = await supabase\n      .from('prieres')\n      .select('*')\n      .order('date', { ascending: false })\n\n    if (error) {\n      console.error('Erreur:', error)\n    } else {\n      setPrieres(data || [])\n    }\n    setLoading(false)\n  }\n\n  const getTypeColor = (type: string) => {\n    switch (type) {\n      case 'guerison': return '#ef4444'\n      case 'freres': return '#3b82f6'\n      case 'intercession': return '#8b5cf6'\n      default: return '#6366f1'\n    }\n  }\n\n  const getTypeLabel = (type: string) => {\n    switch (type) {\n      case 'guerison': return 'Gu√©rison'\n      case 'freres': return 'Pri√®re des fr√®res'\n      case 'intercession': return 'Intercession'\n      default: return type\n    }\n  }\n\n  if (loading) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        background: 'linear-gradient(135deg, #eef2ff 0%, #ffffff 50%, #e0e7ff 100%)',\n        padding: '2rem 1rem'\n      }}>\n        <div style={{ maxWidth: '1200px', margin: '0 auto' }}>\n          <div style={{\n            background: 'white',\n            borderRadius: '1rem',\n            padding: '2rem',\n            boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n          }}>\n            <p style={{ textAlign: 'center', color: '#6b7280' }}>Chargement des pri√®res...</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div style={{\n      minHeight: '100vh',\n      background: 'linear-gradient(135deg, #eef2ff 0%, #ffffff 50%, #e0e7ff 100%)',\n      padding: '2rem 1rem'\n    }}>\n      <div style={{ maxWidth: '1200px', margin: '0 auto' }}>\n        {/* En-t√™te */}\n        <div style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: '2rem',\n          flexWrap: 'wrap',\n          gap: '1rem'\n        }}>\n          <div style={{ display: 'flex', alignItems: 'center' }}>\n            <div style={{\n              background: 'linear-gradient(135deg, #6366f1, #4f46e5)',\n              borderRadius: '1rem',\n              padding: '1rem',\n              marginRight: '1rem'\n            }}>\n              <HandHeart style={{ width: '2rem', height: '2rem', color: 'white' }} />\n            </div>\n            <div>\n              <h1 style={{\n                fontSize: '2.5rem',\n                fontWeight: 'bold',\n                color: '#1e293b',\n                margin: '0 0 0.5rem 0'\n              }}>\n                Pri√®res\n              </h1>\n              <p style={{ color: '#64748b', margin: 0, fontSize: '1.125rem' }}>\n                Suivez vos intentions de pri√®re et leurs fruits\n              </p>\n            </div>\n          </div>\n          <Link\n            href=\"/prieres/nouvelle\"\n            style={{\n              display: 'inline-flex',\n              alignItems: 'center',\n              padding: '0.75rem 1.5rem',\n              background: 'linear-gradient(135deg, #6366f1, #4f46e5)',\n              color: 'white',\n              borderRadius: '0.75rem',\n              textDecoration: 'none',\n              fontWeight: '500',\n              transition: 'transform 0.2s',\n              boxShadow: '0 4px 6px rgba(99, 102, 241, 0.3)'\n            }}\n            onMouseEnter={(e) => e.target.style.transform = 'translateY(-1px)'}\n            onMouseLeave={(e) => e.target.style.transform = 'translateY(0)'}\n          >\n            <Plus style={{ width: '1.25rem', height: '1.25rem', marginRight: '0.5rem' }} />\n            Nouvelle pri√®re\n          </Link>\n        </div>\n\n        {/* Liste des pri√®res */}\n        {prieres.length === 0 ? (\n          <div style={{\n            background: 'white',\n            borderRadius: '1rem',\n            padding: '3rem 2rem',\n            textAlign: 'center',\n            boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n          }}>\n            <div style={{ fontSize: '4rem', marginBottom: '1rem' }}>üôè</div>\n            <h2 style={{\n              fontSize: '1.5rem',\n              fontWeight: 'bold',\n              color: '#1e293b',\n              marginBottom: '0.5rem'\n            }}>\n              Aucune pri√®re enregistr√©e\n            </h2>\n            <p style={{ color: '#64748b', marginBottom: '1.5rem' }}>\n              Commencez par ajouter votre premi√®re intention de pri√®re\n            </p>\n            <Link\n              href=\"/prieres/nouvelle\"\n              style={{\n                display: 'inline-flex',\n                alignItems: 'center',\n                padding: '0.75rem 1.5rem',\n                background: '#6366f1',\n                color: 'white',\n                borderRadius: '0.75rem',\n                textDecoration: 'none',\n                fontWeight: '500'\n              }}\n            >\n              <Plus style={{ width: '1.25rem', height: '1.25rem', marginRight: '0.5rem' }} />\n              Ajouter une pri√®re\n            </Link>\n          </div>\n        ) : (\n          <div style={{\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fill, minmax(350px, 1fr))',\n            gap: '1.5rem'\n          }}>\n            {prieres.map((priere) => (\n              <Link\n                key={priere.id}\n                href={`/prieres/${priere.id}`}\n                style={{\n                  background: 'white',\n                  borderRadius: '1rem',\n                  padding: '1.5rem',\n                  boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n                  textDecoration: 'none',\n                  color: 'inherit',\n                  transition: 'all 0.2s',\n                  border: '1px solid rgba(99, 102, 241, 0.1)'\n                }}\n                onMouseEnter={(e) => {\n                  e.target.style.transform = 'translateY(-2px)'\n                  e.target.style.boxShadow = '0 8px 15px rgba(0, 0, 0, 0.15)'\n                  e.target.style.borderColor = 'rgba(99, 102, 241, 0.3)'\n                }}\n                onMouseLeave={(e) => {\n                  e.target.style.transform = 'translateY(0)'\n                  e.target.style.boxShadow = '0 4px 6px rgba(0, 0, 0, 0.1)'\n                  e.target.style.borderColor = 'rgba(99, 102, 241, 0.1)'\n                }}\n              >\n                {/* En-t√™te de la carte */}\n                <div style={{ marginBottom: '1rem' }}>\n                  <div style={{\n                    display: 'inline-block',\n                    padding: '0.25rem 0.75rem',\n                    background: getTypeColor(priere.type),\n                    color: 'white',\n                    borderRadius: '9999px',\n                    fontSize: '0.75rem',\n                    fontWeight: '500',\n                    marginBottom: '0.75rem'\n                  }}>\n                    {getTypeLabel(priere.type)}\n                  </div>\n                  <h3 style={{\n                    fontSize: '1.25rem',\n                    fontWeight: 'bold',\n                    color: '#1e293b',\n                    margin: 0\n                  }}>\n                    {priere.personne_prenom}{priere.personne_nom ? ` ${priere.personne_nom}` : ''}\n                  </h3>\n                </div>\n\n                {/* Contenu */}\n                <div style={{ marginBottom: '1rem' }}>\n                  <p style={{\n                    color: '#475569',\n                    lineHeight: '1.5',\n                    margin: '0 0 0.75rem 0'\n                  }}>\n                    {priere.sujet}\n                  </p>\n                  \n                  {priere.notes && (\n                    <p style={{\n                      color: '#64748b',\n                      fontSize: '0.875rem',\n                      fontStyle: 'italic',\n                      margin: 0\n                    }}>\n                      {priere.notes.length > 100 \n                        ? `${priere.notes.substring(0, 100)}...` \n                        : priere.notes\n                      }\n                    </p>\n                  )}\n                </div>\n\n                {/* M√©tadonn√©es */}\n                <div style={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  paddingTop: '1rem',\n                  borderTop: '1px solid #e2e8f0',\n                  fontSize: '0.875rem',\n                  color: '#64748b'\n                }}>\n                  <div style={{ display: 'flex', alignItems: 'center' }}>\n                    <Calendar style={{ width: '1rem', height: '1rem', marginRight: '0.25rem' }} />\n                    {format(new Date(priere.date), 'dd MMM yyyy', { locale: fr })}\n                  </div>\n                  <div style={{ display: 'flex', alignItems: 'center' }}>\n                    <HandHeart style={{ width: '1rem', height: '1rem', marginRight: '0.25rem' }} />\n                    {priere.nombre_fois} fois\n                  </div>\n                </div>\n              </Link>\n            ))}\n          </div>\n        )}\n\n        {/* Citation spirituelle */}\n        <div style={{ marginTop: '3rem', textAlign: 'center' }}>\n          <p style={{\n            color: '#6366f1',\n            fontStyle: 'italic',\n            fontSize: '1.125rem',\n            margin: 0\n          }}>\n            \"Priez sans cesse\" - 1 Thessaloniciens 5:17\n          </p>\n        </div>\n      </div>\n    </div>\n  )\n}\n","filePath":"app/(app)/prieres/page.tsx","timestamp":"2025-06-03T09:45:37.797Z"}